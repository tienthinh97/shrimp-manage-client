{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\src\\\\layouts\\\\Admin.jsx\";\nimport { isLogin, fetchDataSuccess, newValue } from '../redux/actions';\nimport cookie from 'react-cookies';\nimport socketIOClient from \"socket.io-client\";\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport React from \"react\"; // javascript plugin used to create scrollbars on windows\n// import PerfectScrollbar from \"perfect-scrollbar\";\n\nimport { Route, Switch } from \"react-router-dom\";\nimport axios from 'axios';\nimport DemoNavbar from \"components/Navbars/DemoNavbar.jsx\";\nimport Footer from \"components/Footer/Footer.jsx\";\nimport Sidebar from \"components/Sidebar/Sidebar.jsx\";\nimport FixedPlugin from \"components/FixedPlugin/FixedPlugin.jsx\";\nimport routes from \"routes.js\"; // var ps;\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard(props) {\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).call(this, props));\n\n    _this.handleActiveClick = function (color) {\n      _this.setState({\n        activeColor: color\n      });\n    };\n\n    _this.handleBgClick = function (color) {\n      _this.setState({\n        backgroundColor: color\n      });\n    };\n\n    _this.state = {\n      backgroundColor: \"black\",\n      activeColor: \"info\",\n      endPoint: \"https://longuit.herokuapp.com/\",\n      deviceOneOn: false,\n      deviceOneOff: false,\n      data: null,\n      newValue: null\n    };\n    _this.mainPanel = React.createRef();\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"checkLogin\",\n    value: function checkLogin() {\n      // const url = 'http://localhost:3001/';\n      var url = 'http://103.137.184.84:3001/';\n      var dispatch = this.props.dispatch;\n      var token = cookie.load('token');\n      axios.get(url, {\n        headers: {\n          'token': token,\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        if (res.status === 200) {\n          dispatch(fetchDataSuccess(res.data.fullname));\n          dispatch(isLogin());\n        }\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var dispatch = this.props.dispatch;\n      axios.get('http://103.137.184.84:3001/newValue').then(function (response) {\n        dispatch(newValue());\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"sendOn\",\n    value: function sendOn() {\n      var socket = socketIOClient(this.state.endPoint);\n      socket.emit(\"device-one\", \"on\");\n    }\n  }, {\n    key: \"sendOff\",\n    value: function sendOff() {\n      var socket = socketIOClient(this.state.endPoint);\n      socket.emit(\"device-one\", \"off\");\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.checkLogin();\n      this.getData();\n      var socket = socketIOClient(this.state.endPoint);\n      socket.on(\"deviceOne\", function (data) {\n        console.log(data);\n        alert(data);\n      }); // if (navigator.platform.indexOf(\"Win\") > -1) {\n      //   ps = new PerfectScrollbar(this.mainPanel.current);\n      //   document.body.classList.toggle(\"perfect-scrollbar-on\");\n      // }\n    } // componentWillUnmount() {\n    //   if (navigator.platform.indexOf(\"Win\") > -1) {\n    //     ps.destroy();\n    //     document.body.classList.toggle(\"perfect-scrollbar-on\");\n    //   }\n    // }\n    // componentDidUpdate(e) {\n    //   if (e.history.action === \"PUSH\") {\n    //     this.mainPanel.current.scrollTop = 0;\n    //     document.scrollingElement.scrollTop = 0;\n    //   }\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var login = this.props.isLogin;\n\n      if (!login) {\n        return React.createElement(Redirect, {\n          to: \"/signin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Sidebar, Object.assign({}, this.props, {\n        routes: routes,\n        bgColor: this.state.backgroundColor,\n        activeColor: this.state.activeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"main-panel\",\n        ref: this.mainPanel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(DemoNavbar, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, routes.map(function (prop, key) {\n        return React.createElement(Route, {\n          path: prop.layout + prop.path,\n          component: prop.component,\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        });\n      })), React.createElement(Footer, {\n        fluid: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(FixedPlugin, {\n        bgColor: this.state.backgroundColor,\n        activeColor: this.state.activeColor,\n        handleActiveClick: this.handleActiveClick,\n        handleBgClick: this.handleBgClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Dashboard;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    username: state.login.username,\n    password: state.login.password,\n    isLogin: state.login.isLogin,\n    token: state.login.token\n  };\n};\n\nexport default connect(mapStateToProps)(Dashboard);","map":{"version":3,"sources":["C:/Users/Thinh/Desktop/long/src/layouts/Admin.jsx"],"names":["isLogin","fetchDataSuccess","newValue","cookie","socketIOClient","connect","Redirect","React","Route","Switch","axios","DemoNavbar","Footer","Sidebar","FixedPlugin","routes","Dashboard","props","handleActiveClick","color","setState","activeColor","handleBgClick","backgroundColor","state","endPoint","deviceOneOn","deviceOneOff","data","mainPanel","createRef","url","dispatch","token","load","get","headers","then","res","status","fullname","catch","err","console","log","response","error","socket","emit","checkLogin","getData","on","alert","login","map","prop","key","layout","path","component","Component","mapStateToProps","username","password"],"mappings":"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","sourcesContent":["import {isLogin, fetchDataSuccess, newValue}from '../redux/actions';\nimport cookie from 'react-cookies';\nimport socketIOClient from \"socket.io-client\";\nimport {connect} from 'react-redux';\nimport {Redirect} from 'react-router-dom';\nimport React from \"react\";\n// javascript plugin used to create scrollbars on windows\n// import PerfectScrollbar from \"perfect-scrollbar\";\nimport { Route, Switch } from \"react-router-dom\";\nimport axios from 'axios';\nimport DemoNavbar from \"components/Navbars/DemoNavbar.jsx\";\nimport Footer from \"components/Footer/Footer.jsx\";\nimport Sidebar from \"components/Sidebar/Sidebar.jsx\";\nimport FixedPlugin from \"components/FixedPlugin/FixedPlugin.jsx\";\n\nimport routes from \"routes.js\";\n\n// var ps;\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      backgroundColor: \"black\",\n      activeColor: \"info\",\n      endPoint: \"https://longuit.herokuapp.com/\",\n\t\t\tdeviceOneOn: false,\n\t\t\tdeviceOneOff: false,\n      data: null,\n      newValue: null\n    };\n    this.mainPanel = React.createRef();\n  }\n  \n  checkLogin() {\n\t\t// const url = 'http://localhost:3001/';\n\t\tconst url = 'http://103.137.184.84:3001/';\n\t\tconst { dispatch } = this.props;\n\t\tconst token = cookie.load('token');\n\t\taxios.get(url, {\n\t\t\theaders: {\n\t\t\t\t'token': token,\n        'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t\t.then(res => {\n\t\t\tif(res.status === 200) {\n\t\t\t\tdispatch(fetchDataSuccess(res.data.fullname))\n\t\t\t\tdispatch(isLogin())\n\t\t\t}\n\t\t})\n\t\t.catch(err => console.log(err))\n  }\n  getData() {\n    const { dispatch } = this.props;\n    axios.get('http://103.137.184.84:3001/newValue')\n    .then(function (response) {\n      dispatch(newValue())\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n  }\n  sendOn() {\n\t\tconst socket = socketIOClient(this.state.endPoint);\n\t\t\tsocket.emit(\"device-one\",\"on\")\n\t}\n\n\tsendOff() {\n\t\tconst socket = socketIOClient(this.state.endPoint);\n\t\t\tsocket.emit(\"device-one\",\"off\")\n  }\n  \n  componentDidMount() {\n    this.checkLogin();\n    this.getData()\n\t\tconst socket = socketIOClient(this.state.endPoint);\n\t\tsocket.on(\"deviceOne\", function(data) {\n\t\t\tconsole.log(data)\n\t\t\talert(data);\n\t\t})\n    // if (navigator.platform.indexOf(\"Win\") > -1) {\n    //   ps = new PerfectScrollbar(this.mainPanel.current);\n    //   document.body.classList.toggle(\"perfect-scrollbar-on\");\n    // }\n  }\n  // componentWillUnmount() {\n  //   if (navigator.platform.indexOf(\"Win\") > -1) {\n  //     ps.destroy();\n  //     document.body.classList.toggle(\"perfect-scrollbar-on\");\n  //   }\n  // }\n  // componentDidUpdate(e) {\n  //   if (e.history.action === \"PUSH\") {\n  //     this.mainPanel.current.scrollTop = 0;\n  //     document.scrollingElement.scrollTop = 0;\n  //   }\n  // }\n  handleActiveClick = color => {\n    this.setState({ activeColor: color });\n  };\n  handleBgClick = color => {\n    this.setState({ backgroundColor: color });\n  };\n  render() {\n    const login = this.props.isLogin;\n    if(!login) {\n      return <Redirect to=\"/signin\" />;\n    }\n    return (\n      <div className=\"wrapper\">\n        <Sidebar\n          {...this.props}\n          routes={routes}\n          bgColor={this.state.backgroundColor}\n          activeColor={this.state.activeColor}\n        />\n        <div className=\"main-panel\" ref={this.mainPanel}>\n          <DemoNavbar {...this.props} />\n          <Switch>\n            {routes.map((prop, key) => {\n              return (\n                <Route\n                  path={prop.layout + prop.path}\n                  component={prop.component}\n                  key={key}\n                />\n              );\n            })}\n          </Switch>\n          <Footer fluid />\n        </div>\n        <FixedPlugin\n          bgColor={this.state.backgroundColor}\n          activeColor={this.state.activeColor}\n          handleActiveClick={this.handleActiveClick}\n          handleBgClick={this.handleBgClick}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  username: state.login.username,\n  password: state.login.password,\n  isLogin: state.login.isLogin,\n  token: state.login.token\n})\nexport default connect(mapStateToProps)(Dashboard)\n\n"]},"metadata":{},"sourceType":"module"}