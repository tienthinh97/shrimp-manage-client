{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Thinh\\\\Desktop\\\\long\\\\src\\\\layouts\\\\Admin.jsx\";\nimport { isLogin, fetchDataSuccess } from '../redux/actions';\nimport cookie from 'react-cookies';\nimport socketIOClient from \"socket.io-client\";\nimport React from \"react\"; // javascript plugin used to create scrollbars on windows\n\nimport PerfectScrollbar from \"perfect-scrollbar\";\nimport { Route, Switch } from \"react-router-dom\";\nimport axios from 'axios';\nimport DemoNavbar from \"components/Navbars/DemoNavbar.jsx\";\nimport Footer from \"components/Footer/Footer.jsx\";\nimport Sidebar from \"components/Sidebar/Sidebar.jsx\";\nimport FixedPlugin from \"components/FixedPlugin/FixedPlugin.jsx\";\nimport routes from \"routes.js\";\nvar ps;\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard(props) {\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dashboard).call(this, props));\n\n    _this.handleActiveClick = function (color) {\n      _this.setState({\n        activeColor: color\n      });\n    };\n\n    _this.handleBgClick = function (color) {\n      _this.setState({\n        backgroundColor: color\n      });\n    };\n\n    _this.state = {\n      backgroundColor: \"black\",\n      activeColor: \"info\",\n      endPoint: \"https://longuit.herokuapp.com/\",\n      deviceOneOn: false,\n      deviceOneOff: false,\n      data: null\n    };\n    _this.mainPanel = React.createRef();\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"checkLogin\",\n    value: function checkLogin() {\n      // const url = 'http://localhost:3001/';\n      var url = 'https://longuit.herokuapp.com/';\n      var dispatch = this.props.dispatch;\n      var token = cookie.load('token'); // console.log(\"HOME token:\", token)\n\n      axios.get(url, {\n        headers: {\n          'token': token,\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.status === 200) {\n          dispatch(fetchDataSuccess(res.data.fullname));\n          dispatch(isLogin());\n        }\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"sendOn\",\n    value: function sendOn() {\n      var socket = socketIOClient(this.state.endPoint);\n      socket.emit(\"device-one\", \"on\");\n    }\n  }, {\n    key: \"sendOff\",\n    value: function sendOff() {\n      var socket = socketIOClient(this.state.endPoint);\n      socket.emit(\"device-one\", \"off\");\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (navigator.platform.indexOf(\"Win\") > -1) {\n        ps = new PerfectScrollbar(this.mainPanel.current);\n        document.body.classList.toggle(\"perfect-scrollbar-on\");\n      }\n\n      this.checkLogin();\n      var socket = socketIOClient(this.state.endPoint);\n      socket.on(\"deviceOne\", function (data) {\n        console.log(data);\n        alert(data);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (navigator.platform.indexOf(\"Win\") > -1) {\n        ps.destroy();\n        document.body.classList.toggle(\"perfect-scrollbar-on\");\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(e) {\n      if (e.history.action === \"PUSH\") {\n        this.mainPanel.current.scrollTop = 0;\n        document.scrollingElement.scrollTop = 0;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Sidebar, Object.assign({}, this.props, {\n        routes: routes,\n        bgColor: this.state.backgroundColor,\n        activeColor: this.state.activeColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"main-panel\",\n        ref: this.mainPanel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(DemoNavbar, Object.assign({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, routes.map(function (prop, key) {\n        return React.createElement(Route, {\n          path: prop.layout + prop.path,\n          component: prop.component,\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        });\n      })), React.createElement(Footer, {\n        fluid: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(FixedPlugin, {\n        bgColor: this.state.backgroundColor,\n        activeColor: this.state.activeColor,\n        handleActiveClick: this.handleActiveClick,\n        handleBgClick: this.handleBgClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Dashboard;\n}(React.Component);\n\nexport default Dashboard;","map":{"version":3,"sources":["C:/Users/Thinh/Desktop/long/src/layouts/Admin.jsx"],"names":["isLogin","fetchDataSuccess","cookie","socketIOClient","React","PerfectScrollbar","Route","Switch","axios","DemoNavbar","Footer","Sidebar","FixedPlugin","routes","ps","Dashboard","props","handleActiveClick","color","setState","activeColor","handleBgClick","backgroundColor","state","endPoint","deviceOneOn","deviceOneOff","data","mainPanel","createRef","url","dispatch","token","load","get","headers","then","res","console","log","status","fullname","catch","err","socket","emit","navigator","platform","indexOf","current","document","body","classList","toggle","checkLogin","on","alert","destroy","e","history","action","scrollTop","scrollingElement","map","prop","key","layout","path","component","Component"],"mappings":"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","sourcesContent":["import {isLogin, fetchDataSuccess}from '../redux/actions';\nimport cookie from 'react-cookies';\nimport socketIOClient from \"socket.io-client\";\nimport React from \"react\";\n// javascript plugin used to create scrollbars on windows\nimport PerfectScrollbar from \"perfect-scrollbar\";\nimport { Route, Switch } from \"react-router-dom\";\nimport axios from 'axios';\nimport DemoNavbar from \"components/Navbars/DemoNavbar.jsx\";\nimport Footer from \"components/Footer/Footer.jsx\";\nimport Sidebar from \"components/Sidebar/Sidebar.jsx\";\nimport FixedPlugin from \"components/FixedPlugin/FixedPlugin.jsx\";\n\nimport routes from \"routes.js\";\n\nvar ps;\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      backgroundColor: \"black\",\n      activeColor: \"info\",\n      endPoint: \"https://longuit.herokuapp.com/\",\n\t\t\tdeviceOneOn: false,\n\t\t\tdeviceOneOff: false,\n\t\t\tdata: null\n    };\n    this.mainPanel = React.createRef();\n  }\n  checkLogin() {\n\t\t// const url = 'http://localhost:3001/';\n\t\tconst url = 'https://longuit.herokuapp.com/';\n\t\tconst { dispatch } = this.props;\n\t\tconst token = cookie.load('token');\n\t\t// console.log(\"HOME token:\", token)\n\t\taxios.get(url, {\n\t\t\theaders: {\n\t\t\t\t'token': token,\n        'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t\t.then(res => {\n\t\t\tconsole.log(res)\n\t\t\tif(res.status === 200) {\n\t\t\t\tdispatch(fetchDataSuccess(res.data.fullname))\n\t\t\t\tdispatch(isLogin())\n\t\t\t}\n\t\t})\n\t\t.catch(err => console.log(err))\n\t}\n  sendOn() {\n\t\tconst socket = socketIOClient(this.state.endPoint);\n\t\t\tsocket.emit(\"device-one\",\"on\")\n\t}\n\n\tsendOff() {\n\t\tconst socket = socketIOClient(this.state.endPoint);\n\t\t\tsocket.emit(\"device-one\",\"off\")\n  }\n  \n  componentDidMount() {\n    if (navigator.platform.indexOf(\"Win\") > -1) {\n      ps = new PerfectScrollbar(this.mainPanel.current);\n      document.body.classList.toggle(\"perfect-scrollbar-on\");\n    }\n    this.checkLogin();\n\t\tconst socket = socketIOClient(this.state.endPoint);\n\t\tsocket.on(\"deviceOne\", function(data) {\n\t\t\tconsole.log(data)\n\t\t\talert(data);\n\t\t})\n  }\n  componentWillUnmount() {\n    if (navigator.platform.indexOf(\"Win\") > -1) {\n      ps.destroy();\n      document.body.classList.toggle(\"perfect-scrollbar-on\");\n    }\n  }\n  componentDidUpdate(e) {\n    if (e.history.action === \"PUSH\") {\n      this.mainPanel.current.scrollTop = 0;\n      document.scrollingElement.scrollTop = 0;\n    }\n  }\n  handleActiveClick = color => {\n    this.setState({ activeColor: color });\n  };\n  handleBgClick = color => {\n    this.setState({ backgroundColor: color });\n  };\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <Sidebar\n          {...this.props}\n          routes={routes}\n          bgColor={this.state.backgroundColor}\n          activeColor={this.state.activeColor}\n        />\n        <div className=\"main-panel\" ref={this.mainPanel}>\n          <DemoNavbar {...this.props} />\n          <Switch>\n            {routes.map((prop, key) => {\n              return (\n                <Route\n                  path={prop.layout + prop.path}\n                  component={prop.component}\n                  key={key}\n                />\n              );\n            })}\n          </Switch>\n          <Footer fluid />\n        </div>\n        <FixedPlugin\n          bgColor={this.state.backgroundColor}\n          activeColor={this.state.activeColor}\n          handleActiveClick={this.handleActiveClick}\n          handleBgClick={this.handleBgClick}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}